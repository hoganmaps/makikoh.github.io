<html>
<head>
	
	<title>city of Cupertino</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	


 <!-- Load leaflet from CDN-->	
	<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
	
	
<!-- Load Esri Leaflet from CDN-->
	<script src="https://unpkg.com/esri-leaflet@2.0.6"></script>
    <link rel="stylesheet" href="https://unpkg.com/esri-leaflet-geocoder@2.2.1/dist/esri-leaflet-geocoder.css">
    <script src="https://unpkg.com/esri-leaflet-geocoder@2.2.1"></script>

<!-- Load bootstrap from bootstrap folder-->
<link rel="stylesheet" href="bootstrap/bootstrap-3.3.7-dist/css/bootstrap.min.css">
<link rel="stylesheet" href="bootstrap/bootstrap-3.3.7-dist/css/bootstrap.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>	
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>	
<!-- Load Pulse Icon-->
<script src="L.Icon.Pulse.js"></script>
<link rel="stylesheet" href="L.Icon.Pulse.css">
	

<script src="cu_GISdata/EV.js"></script>
  <script src="cu_GISdata/stsweep.js"></script>
  <script src="cu_GISdata/tree.js"></script>
  <script src="cu_GISdata/cityService.js"></script> 
  <script src="cu_GISdata/fireS.js"></script> 
  <script src="cu_GISdata/school.js"></script> 
  <script src="cu_GISdata/bike.js"></script> 
<script src="cu_GISdata/cu_bound.js"></script>
<script src="cu_GISdata/parks2.js"></script>
<script src="cu_GISdata/schedule.js"></script>

<style>
#header {
    background-color:  #999999;  
	font:  fantasy; 
    color:  #FFFFFF;
       
}
h1 {  font-size:  26px;  font:"Courier New", Courier, monospace;   padding-left:5px; background-color:#FFFFFF}  


#container{  
    background-color: #FFFFFF;    z-index: 1000;  width: 280px; overflow-y: auto; height: 100%;  }
#map { height: 95%;   width: 95%;}



#box { position: absolute;  
    background-color: #FFFFFF;  border-style: ridge;    z-index: 1000;   width: 300px; overflow-y: auto; overflow-x:hidden;  
	
	}
.info {
    padding: 6px 8px;
    font: 14px/16px Arial, Helvetica, sans-serif;
    background: white;
    background: rgba(255,255,255,0.8);
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    border-radius: 5px;
}
.info h4 {
    margin: 0 0 5px;
    color: #777;
}
#footer {
    background-color: #999999;
    color:  #999999;
    clear:both;
    text-align:center;
    padding:5px; 
	margin-bottom: 15px;
}
li:hover{
    color: #0000FF;
}
li[disabled]:hover{
   color:#000000;
}

li{ margin-left:10 px;
    cursor: pointer; 
    cursor: hand;}
	
ul{
    
    overflow-y: scroll;
}

.panel-heading{ border: solid; border-width:thin;
 
}
.panel-heading .accordion-toggle:after {
    /* symbol for "opening" panels */
    font-family: 'Glyphicons Halflings';  /* essential for enabling glyphicon */
    content: "\e114";    /* ad;just as needed, taken from bootstrap.css */
    float: right;        /* adjust as needed */
    color: grey;         /* adjust as needed */
	
	
}
.panel-heading .accordion-toggle.collapsed:after {
    /* symbol for "collapsed" panels */
    content: "\e080";    /* adjust as needed, taken from bootstrap.css */
} 
.css-icon {

 
}

.gps_ring {
   
    border: 5px solid  #FF0000;
     -webkit-border-radius: 60px;
     height: 20px;
     width: 20px;       
    -webkit-animation: pulsate 1s ease-out;
    -webkit-animation-iteration-count: infinite; 
    /*opacity: 0.0*/
}
::-webkit-scrollbar {
    -webkit-appearance: none;
    width: 7px;
}
::-webkit-scrollbar-thumb {
    border-radius: 4px;
    background-color: rgba(0,0,0,.5);
    -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5);
}
@-webkit-keyframes pulsate {
        0% {-webkit-transform: scale(0.1, 0.1); opacity: 0.0;}
        50% {opacity: 1.0;}
        100% {-webkit-transform: scale(1.2, 1.2); opacity: 0.0;}
}

#modalContainer {
    background-color:rgba(0, 0, 0, 0.3);
    position:absolute;
    width:100%;
    height:100%;
    top:0px;
    left:0px;
    z-index:10000;
    background-image:url(tp.png); /* required by MSIE to prevent actions on lower z-index elements */
}

#alertBox {
    position: absolute;
    width:300px;
    min-height:350px;
    margin-top:50px;
    border:1px solid #666;
    background-color:#fff;
    background-repeat:no-repeat;
    background-position:20px 30px;
}

#modalContainer > #alertBox {
    position:fixed;
}

#alertBox h1 {
    margin:0;
    font:bold 0.9em verdana,arial;
    background-color: #336600;
    color:#FFF;
    border-bottom:1px solid #000;
    padding:2px 0 2px 5px;
}

#alertBox p {
    font:0.7em verdana,arial;
    height:50px;
    padding-left:3px;
    margin-left:10px;
}

#alertBox #closeBtn {
    display:block;
    position:  absolute;
	right: 0;
	bottom: 0;
    margin:5px auto;
    padding:7px;
    border:0 none;
    width:70px;
    font:0.7em verdana,arial;
    text-transform:uppercase;
    text-align:center;
    color:#FFF;
    background-color:#357EBD;
    border-radius: 3px;
    text-decoration:none;
}

/* unrelated styles */

#mContainer {
    position:relative;
    width:600px;
    margin:auto;
    padding:5px;
    border-top:2px solid #000;
    border-bottom:2px solid #000;
    font:0.7em verdana,arial;
}

h1,h2 {
    margin:0;
    padding:4px;
    font:bold 1.5em verdana;
    border-bottom:1px solid #000;
}

code {
    font-size:1.2em;
    color:#069;
}

#credits {
    position:relative;
    margin:25px auto 0px auto;
    width:350px; 
    font:0.7em verdana;
    border-top:1px solid #000;
    border-bottom:1px solid #000;
    height:90px;
    padding-top:4px;
}

#credits img {
    float:left;
    margin:5px 10px 5px 0px;
    border:1px solid #000000;
    width:80px;
    height:79px;
}

.important {
    background-color:#F5FCC8;
    padding:2px;
}

code span {
    color:green;
}

.btn-minimize {
    width: 50px;
    height: 20px;
    background-color: white;
	border: 1px solid #60A2E4;
	}
.btn-minimize.btn-plus {
    background-color: #60A2E4;
	width: 300px;
    height: 15px;
	float:left;
	margin-right:5px;
	 overflow: hidden;
	
}
</style>
</head>

<body>



</div>



<div id="map" >

<div id="box">
<button  class="btn-minimize" ><i class="glyphicon glyphicon-triangle-top"></i></button>
<div id="container">
<div><center><img src="IconImg/cupertinoLogo.png" ></img></center> </div>
<div><center><a href="http://www.cupertino.org/" target="_blank" class="btn btn-default">City of Cupertino </a>
     <a href="http://gis.cupertino.opendata.arcgis.com/" target="_blank" class="btn btn-default">GIS Portal </a>
</div>

<div class="panel-group" style="overflow-y: scroll; height:500px;">
    <div class="panel panel-default" >
      <div class="panel-heading" >
        <h5 class="panel-title">
          <li class="accordion-toggle collapsed" style="list-style: none;" data-toggle="collapse" href="#cu_event" onClick="showCuEvent()" ><span class="glyphicon glyphicon-calendar"></span> Event</a>
        </h5>
      </div>
      <div id="cu_event" class="panel-collapse collapse in">
       <ul class="pre-scrollable" id="evlist" style="list-style-type:none;">
        
        
		</ul>
      </div>
      <div class="panel-heading" >
        <h5 class="panel-title" >
          <li class="accordion-toggle collapsed" style="list-style: none;" data-toggle="collapse" href="#pService" onClick="showService(cityService)"><span class="glyphicon glyphicon-star"></span> City Service Center</a>
        </h5>
      </div>
      <div id="pService" class="panel-collapse collapse">
        <ul id="CSlist" style="list-style-type:none">
           
        </ul> 
       </div>
      <div class="panel-heading">
        <h5 class="panel-title">
          <li class="accordion-toggle collapsed" style="list-style: none;" data-toggle="collapse" href="#collapse1" onClick="showHF1()"><span class="glyphicon glyphicon-tree-conifer"></span> Parks and Recreations</a>
        </h5></div>
      
      <div id="collapse1" class="panel-collapse collapse">
      <select name="activity" id="activity" onChange="actselect()" style="position: right">
  <option value="all" selected="selected">All</option>
  <option value="BASEBALL">Baseball Field</option>
  <option value="basketball">Basketball Court</option>
  <option value="bbq">BBQ pit</option>
  <option value="soccer">Soccer</option>
  <option value="tennis">Tennis Court</option>
</select>
      <ul class="pre-scrollable" id="list1" style="list-style-type:none">
      
          <li class="longlist" id="slist"></li>
          </ul>
        
        </div>
        <div class="panel-heading">
        <h5 class="panel-title">
          <li class="accordion-toggle collapsed" style="list-style: none;" data-toggle="collapse" href="#collapse2" onClick="showGabage()"><span class="glyphicon glyphicon-trash"></span> Gabage Schedule</a>
        </h5>
      </div>
        <div id="collapse2" class="panel-collapse collapse">
        <ul class="list-group">
          <li class="list-group-item" onMouseOver="highlightFeature(this)" onMouseOut="resetHighlight(this)" id="mon"><span class="glyphicon glyphicon-stop" style="color:#9966ff"></span> Monday</li>
          <li class="list-group-item" onMouseOver="highlightFeature(this)" onMouseOut="resetHighlight(this)" id="tue"><span class="glyphicon glyphicon-stop" style="color:#3366ff"></span> Tuesday</li>
          <li class="list-group-item" onMouseOver="highlightFeature(this)" onMouseOut="resetHighlight(this)" id="wed"><span class="glyphicon glyphicon-stop" style="color:#00cc99"></span> Wednesday</li>
           <li class="list-group-item" onMouseOver="highlightFeature(this)" onMouseOut="resetHighlight(this)" id="thur"><span class="glyphicon glyphicon-stop" style="color:#ff9933"></span> Thursday</li>
            <li class="list-group-item" onMouseOver="highlightFeature(this)" onMouseOut="resetHighlight(this)" id="fri"><span class="glyphicon glyphicon-stop" style="color:#ffff4d"></span> Friday</li>
          </ul>
           </div>
 <div class="panel-heading">
        <h5 class="panel-title">
          <li class="accordion-toggle collapsed" style="list-style: none;" data-toggle="collapse" href="#collapse3" onClick="showFS()"><span class="glyphicon glyphicon-flag"></span> Sheriff / Fire Station</a>
        </h5>
      </div>
        <div id="collapse3" class="panel-collapse collapse">
        <ul style="list-style-type:none">
        <li onClick="fsselect(fs1)"> 1. Cupertino Fire Station #1</li>
        <li onClick="fsselect(fs2)"> 2. Monta Vista Fire Station #7</li>
        <li onClick="fsselect(fs3)"> 3. Seven Springs Fire Station #2</li>
        <li onClick="fsselect(shri)"> 4. Santa Clara County Sheriffs Office</li>
         </ul> 
           </div>

 <div class="panel-heading">
        <h5 class="panel-title">
          <li class="accordion-toggle collapsed" style="list-style: none;" data-toggle="collapse" href="#collapse4" onClick="showSC()"><span class="glyphicon glyphicon-education"></span> School</a>
        </h5>
      </div>
        <div id="collapse4" class="panel-collapse collapse">
        <ul class="pre-scrollable" style="overflow-y: scroll; height:300px; list-style-type:none;">
        
        <li><img src="IconImg/elementary.png" height="18" width="18"><b>Elementaly School</b></li>
        <li id="37.32076182648904,-122.01115797511854" onClick="selectSK(this)">1. Bethel Lutheran School</li>
        <li id="37.31474641741495,-122.02621443013557" onClick="selectSK(this)">2. Eaton Elementary</li>
        <li id="37.321142695571666,-122.0398986905209" onClick="selectSK(this)">3. Faria Elementary</li>
        <li id="37.33136688526556,-122.04500865566425" onClick="selectSK(this)">4. Garden Gate Elementary</li>
        <li id="37.32713038654291,-122.02278122064581" onClick="selectSK(this)">5. L.P. Collins Elementary</li>       
        <li id="37.315056550834015,-122.05425556496778" onClick="selectSK(this)">6. Lincoln Elementary</li>
        <li id="37.303976897850774,-122.04738890463638" onClick="selectSK(this)">7. Regnart Elementary School</li>
        <li id="37.31517900273587,-122.00884650583491" onClick="selectSK(this)">8. Sedgwick Elementary</li>
        <li id="37.32449105765958,-122.03061913864788" onClick="selectSK(this)">9. St Joseph Cupertino School</li>
        <li id="37.3276267491917,-122.06375505176617" onClick="selectSK(this)">10. Stevens Creek Elementary</li>
        <li><img src="IconImg/middle.png" height="18" width="18"><b>Middle School</b></li>
        <li id="37.311033656930604,-122.0109700571576" onClick="selectSK(this)">1. Hyde Middle School</li>
        <li id="37.310894302377044,-122.051013597578" onClick="selectSK(this)">2. Kennedy Middle School</li>
        <li id="37.329520859174316,-122.0278700605335" onClick="selectSK(this)">3. Lawson Middle School</li>
        <li><img src="IconImg/High.png" height="18" width="18"><b>High School</b></li>
        <li id="37.320934330542336,-122.0095445217235" onClick="selectSK(this)">1. Cupertino High School</li>
        <li id="37.33627476385376,-122.04815895120099" onClick="selectSK(this)">2. Homestead High School</li>
        <li id="37.31399903312684,-122.05669609594378" onClick="selectSK(this)">3. Monta Vista High School</li>
        <li><img src="IconImg/college.png" height="18" width="18"><b>College & School District</b></li>
        <li id="37.31927484369727,-122.04461448469753" onClick="selectSK(this)">1. De Anza College</li>
        <li id="37.323222159549076,-122.02478058622901" onClick="selectSK(this)">2. USF South Bay Regional Campus</li>
        <li id="37.327232122359874,-122.02811779315084" onClick="selectSK(this)">3. Cupertino Union School District</li>
        </ul> 
           </div>
 <div class="panel-heading">
        <h5 class="panel-title">
          <li class="accordion-toggle collapsed" style="list-style: none;" data-toggle="collapse" href="#collapse5" onClick="showBikeRT()"><span class="glyphicon glyphicon-random"></span> Bike Route</a>
        </h5>
      </div>
        <div id="collapse5" class="panel-collapse collapse">
        <ul class="list-group">
        <li class="list-group-item" disabled><span class="glyphicon glyphicon-stop" style="color:brown"></span>BIKE PATHS OFF STREET</li>
       <li class="list-group-item" disabled><span class="glyphicon glyphicon-stop" style="color:green"></span>BIKE LANES ON STREET</li>
       <li class="list-group-item" disabled><span class="glyphicon glyphicon-stop" style="color:orange"></span>BIKE ROUTE</li>
       <li class="list-group-item" disabled><span class="glyphicon glyphicon-stop" style="color:red"></span>ROW PUBLIC ACCESS</li>
         </ul> 
           </div>
 <div class="panel-heading">
        <h5 class="panel-title" >
          <li class="accordion-toggle collapsed" style="list-style: none;" data-toggle="collapse" href="#collapse6" onClick="showEstation()"><span class="glyphicon glyphicon-flash"></span> Electric Charging Station</a>
        </h5>
      </div>
        <div id="collapse6" class="panel-collapse collapse">
        <ul style="list-style: none;">
     
		<li disabled>Need:  <a href="https://www.chargepoint.com" target="_blank">point card</a> or Credit card</li>
        <li disabled>Average cost:  ~$1.50/hour </li>
		<li>
         </ul> 
           </div>
 <div class="panel-heading">
        <h5 class="panel-title">
          <li class="accordion-toggle collapsed" style="list-style: none;" data-toggle="collapse" href="#collapse7" onClick="showStClean()"><span class="glyphicon glyphicon-road"></span> Street Cleaning</a>
        </h5>
      </div>
        <div id="collapse7" class="panel-collapse collapse">
        <ul class="list-group" style="overflow-y: scroll; height:300px; list-style-type:none;">
        <li class="list-group-item" onMouseOver="highlightSTCLN(this)" onMouseOut="resetHighlightSTCLN(this)" id="mon13"><span class="glyphicon glyphicon-stop" style="color:#FFFF4D"></span> 1ST & 3RD MONDAY</li>
        <li class="list-group-item" onMouseOver="highlightSTCLN(this)" onMouseOut="resetHighlightSTCLN(this)" id="tue13"><span class="glyphicon glyphicon-stop" style="color:#669900"></span> 1ST & 3RD TUESDAY</li>
        <li class="list-group-item" onMouseOver="highlightSTCLN(this)" onMouseOut="resetHighlightSTCLN(this)" id="wed13"><span class="glyphicon glyphicon-stop" style="color:#ff3399"></span> 1ST & 3RD WEDNESDAY</li>
        <li class="list-group-item" onMouseOver="highlightSTCLN(this)" onMouseOut="resetHighlightSTCLN(this)" id="th13"><span class="glyphicon glyphicon-stop" style="color:#996633"></span> 1ST & 3RD THURSDAY</li>
        <li class="list-group-item" onMouseOver="highlightSTCLN(this)" onMouseOut="resetHighlightSTCLN(this)" id="mon24"><span class="glyphicon glyphicon-stop" style="color:#9966ff"></span> 2ND & 4TH MONDAY</li>
        <li class="list-group-item" onMouseOver="highlightSTCLN(this)" onMouseOut="resetHighlightSTCLN(this)" id="tue24"><span class="glyphicon glyphicon-stop" style="color:#3366ff"></span> 2ND & 4TH TUESDAY</li>
        <li class="list-group-item" onMouseOver="highlightSTCLN(this)" onMouseOut="resetHighlightSTCLN(this)" id="wed24"><span class="glyphicon glyphicon-stop" style="color:#00cc99"></span> 2ND & 4TH WEDNESDAY</li>
        <li class="list-group-item" onMouseOver="highlightSTCLN(this)" onMouseOut="resetHighlightSTCLN(this)" id="th24"><span class="glyphicon glyphicon-stop" style="color:#ff9933"></span> 2ND & 4TH THURSDAY</li>
         </ul> 
           </div>

</div>
</div>
</div>

<script>

	//var map = L.map('map').setView([51.505, -0.09], 13);
    var map = L.map('map',{zoomControl:false}).setView([37.32212,-122.045],15);
	
	new L.Control.Zoom({ position: 'topright' }).addTo(map);
	

var imagery=L.esri.basemapLayer('Imagery');
var streets=L.esri.basemapLayer('Streets');
var topography=L.esri.basemapLayer('Topographic').addTo(map);
var openstreetmap=L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
	attribution: '&copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'
});

var baseMaps={
"Streets": streets,
"Imagery": imagery,
"Topographic": topography,
"OpenStreetMap": openstreetmap
};

var boundStyle={
   "color": "black" ,
   "weight":3,
   "fillOpacity": 0
   };
   
 new L.control.layers(baseMaps).addTo(map);


 var cu_bound=L.geoJson(cpbd,{style: boundStyle}).addTo(map);
//cu_bound.on({dbclick: zoomToFeature});
var ALERT_TITLE = "Disclaimer";
var ALERT_BUTTON_TEXT = "Ok";

if(document.getElementById) {
    window.alert = function(txt) {
        createCustomAlert(txt);
    }
}

function createCustomAlert(txt) {
    d = document;

    if(d.getElementById("modalContainer")) return;

    mObj = d.getElementsByTagName("body")[0].appendChild(d.createElement("div"));
    mObj.id = "modalContainer";
    mObj.style.height = d.documentElement.scrollHeight + "px";

    alertObj = mObj.appendChild(d.createElement("div"));
    alertObj.id = "alertBox";
    if(d.all && !window.opera) alertObj.style.top = document.documentElement.scrollTop + "px";
    alertObj.style.left = (d.documentElement.scrollWidth - alertObj.offsetWidth)/2 + "px";
    alertObj.style.visiblity="visible";

    h1 = alertObj.appendChild(d.createElement("h1"));
    h1.appendChild(d.createTextNode(ALERT_TITLE));

    msg = alertObj.appendChild(d.createElement("p"));
    //msg.appendChild(d.createTextNode(txt));
    msg.innerHTML = txt;

    btn = alertObj.appendChild(d.createElement("a"));
    btn.id = "closeBtn";
    btn.appendChild(d.createTextNode(ALERT_BUTTON_TEXT));
    btn.href = "#";
    btn.focus();
    btn.onclick = function() { removeCustomAlert();return false; }

    alertObj.style.display = "block";

}

function removeCustomAlert() {
    document.getElementsByTagName("body")[0].removeChild(document.getElementById("modalContainer"));
}
alert("The City of Cupertino does not guarantee the accuracy, adequacy, completeness or usefulness of any information.  The City does not warrant the positional or thematic accuracy of the GIS data.  The GIS data and cartographic digital files are not legal representations of the depicted data.  Information shown on these maps is derived from public records that are constantly undergoing change.  Under no circumstances shall GIS mapping be used for final design purposes.  While every effor has been made to ensure the content, sequence, accuracy, timelines or completeness of meterials presented within thses pages, the City of Cupertino assumes no responsibility for errors or omissions, and explicitly disclaims any representations and warranties, including, without limitation, the implied warranties of merchantability and fitness for a particular purpose.  In orde to proceed, please indicate you understand the disclaimer by clicking on the button below");
 var searchControl = L.esri.Geocoding.geosearch({position:'topright'}).addTo(map);
var results = L.layerGroup().addTo(map);

  searchControl.on('results', function(data){
    results.clearLayers();
    for (var i = data.results.length - 1; i >= 0; i--) {
      results.addLayer(L.marker(data.results[i].latlng).bindPopup("Here!!"));
    }
  });
 
 var divb=L.DomUtil.get('box');
 if(!L.Browser.touch){
    L.DomEvent.disableClickPropagation(divb);
	L.DomEvent.on(divb,'drag',L.DomEvent.stopPropagation);
	}else{
	L.DomEvent.on(divb,'drag',L.DomEvent.stopPropagation);
	}
 
 
var circle;
var garbage;  
  var pIcon=new L.icon({
	iconUrl: 'IconImg/tree.png',
	iconSize: [20,20]
	});

var geojsonMarkerOptions={
    icon: pIcon
	
	};
	
var circleMarkerOption={
color: 'orange',
    fillColor: 'yellow',
    fillOpacity: 0.5,
    radius: 25
};

var cu_list=[];
var xy_list=[];
var cu_xy=[];
var parkID=[];
var coords=[];
var name_coor=[];
var parkID2=[];
var coords2=[];
var name_coor2=[];
var mynode=[];
var textnode=[];

var cssIcon = L.divIcon({
  // Specify a class name we can refer to in CSS.
  className: 'css-icon',
  html: '<div class="gps_ring"></div>'
  // Set marker width and height
  ,iconSize: [22,22]
  ,iconAnchor: [1,0]
});

 var animeIcon=new L.icon.pulse({
	
	iconSize: [15,15]
	});
	
	
var cuEvent;
var polyline;

var cuev={"type":"FeatureCollection","crs":{"type":"name","properties":{"name":"urn:ogc:def:crs:OGC:1.3:CRS84"}},"features":[{"type":"Feature","properties":{"Id":2,"Title":"Safe Routes 2 School","Detail":"A strategy session for creating safer routes to school","phone":"N/A","url":"http://www.cupertino.org/?page=18&recordid=7799&returnURL=%2findex.aspx","eDate":"2/8/2017","eTime":"3:00 pm - 5:00 pm","showmap":true},"geometry":{"type":"Point","coordinates":[-122.028225,37.318381]}},{"type":"Feature","properties":{"Id":3,"Title":"Big Bunny 5K","Detail":"Family Fun Run!","phone":"N/A","url":"http://www.bigbunny5k.com/","eDate":"4/15/2017","eTime":"7:15 am - 11:15 am","showmap":true},"geometry":{"type":"Point","coordinates":[-122.029213,37.318386]}},{"type":"Feature","properties":{"Id":1,"Title":"Farmer's Market","Detail":"","phone":"N/A","url":"http://www.wcfma.org/","eDate":"Every Sunday","eTime":"9:30 am - 1:00 pm","showmap":true},"geometry":{"type":"Point","coordinates":[-122.0492,37.32361]}}]}


var latlngs = [
    [37.31837089427468, -122.02921830159892],
    [37.316225011339355, -122.02921171257506],
    [37.31620652921515, -122.0288008429234],
	[37.316055066322356,-122.02807378853969],
	[37.316066838003266,-122.02717094983416],[37.315363721834174,-122.02714911956294],[37.31537954140263,-122.02318638050764],[37.32069056596608,-122.02320505892098],[37.32067583407001,-122.01974896452289],[37.319757402428486,-122.01978253496321],[37.31973706472365,-122.0181326168978],[37.31844334606085,-122.01860640485901],[37.31831221142091,-122.01768570791069],[37.32153021021485,-122.0163776830859],[37.32155438973507,-122.01543024585654],[37.317379026066895,-122.0170174261578],[37.31639011328493,-122.01743023576498],[37.31616903395912,-122.01747052796593],[37.31593336185735,-122.01725676669851],[37.31571827267894,-122.01683444888864],[37.315487979334755,-122.0166655804489],[37.31512261781523,-122.01679997014477],[37.31485077167983,-122.01707805980485],[37.31462476433991,-122.01749888092287],[37.31441405749428,-122.01765879517988],[37.314049468091355,-122.01773348777918],[37.31382693869619,-122.01788569682161],[37.31342684747652,-122.01839999492842],[37.31540769949465,-122.0223958346141],[37.3154705384487,-122.02260608979184],[37.315469903021466,-122.02311358805876],[37.31529111981873,-122.02310994466607],[37.31527931714382,-122.02722202880358],[37.31598223877557,-122.02725878267533],[37.31598092541927,-122.02827378606834],[37.31609045585983,-122.02855963759403],[37.31615622480667,-122.02900132780502],[37.31615809409507,-122.02931483208414],[37.31836992036855,-122.02929291865219]
];
var polyline = L.polyline(latlngs, {color: 'red', weight: 5, opacity:0.6, 
                lineJoin: 'round'}).addTo(map);
polyline.bindPopup("Big Bunny 5K course").openPopup();


var evName=[];
var evDate=[];
var evTime=[];
var ev_xy=[];
var difference;
cuEvent=L.geoJson(cuev,{


	pointToLayer: function (feature, latlng){
	                             return L.marker(latlng,{icon:animeIcon});
	
	}
	
	,filter: function(feature,layer){var today=new Date();
																  var evdate=new Date(feature.properties.eDate);
																  difference=Math.floor((evdate-today)/(1000*60*60*24))+1;
																  if(isNaN(difference)==true)
																  {difference="";}
																  else if(difference==0)
																  {difference="Today!!"}
																  else if(difference<0)
																  {return feature.properties.showmap=false}
																  else
																  {difference='in '+difference+' Day(s)';}
																  return feature.properties.showmap;}
	
	
	,onEachFeature: function(feature, layer)
		                                                         {
															layer.bindTooltip('<b>'+feature.properties.Title+'</br>'+feature.properties.eDate+'<br><small>'+difference+'</br>click icon for info</small>',{permanent: true, direction: 'top'});
															layer.bindPopup('<b>'+feature.properties.Title+'</b></br>'+feature.properties.Detail+'<br>'+feature.properties.eDate+'</br>'+feature.properties.eTime+'</br>Tel: '+feature.properties.phone+'</br><a href='+feature.properties.url+' target="_blank">more info</a>');
		                                                        // map.addLayer(layer);
															
		
		               // map.addLayer(layer);
					   evName.push(feature.properties.Title);
															evDate.push(feature.properties.eDate);
															evTime.push(feature.properties.eTime);
		                                                    ev_xy.push(feature.geometry.coordinates);
										               }
													  
												   }).addTo(map);
												   

var evnode=[];
var evtextnode=[];	



var eNode = document.getElementById("evlist");

		    for(var i=0; i<evName.length;i++)
			
            {
			//var slist=document.getElementById("list1");
			evnode[i]=document.createElement("LI"); 
 
             setAttributes(evnode[i],{"id":ev_xy[i],"onClick":"selectEV(this)" });
             //var num=Number(i)+1;
		     //alert(parkID2[i]);
             evtextnode[i] = document.createTextNode(evName[i]+": "+evDate[i]); 
             evnode[i].appendChild(evtextnode[i]);
		   
		      //var alist=document.getElementById("list1");
              eNode.appendChild(evnode[i]);
		 //alert("mmmmm");
	      }	
		   //parkID=[];
	 
	
function selectEV(a)
{

var ev_coord=a.id;
//alert(s);
var earry=[];
earry = ev_coord.split(",");
//alert(sarry[0]);
var ex = parseFloat(earry[0]);
var ey = parseFloat(earry[1]);
//var sxy=sx+','+sy;

map.setView([ey,ex],18);
//circle = L.circleMarker([ex,ey],circleMarkerOption).addTo(map);
//circle = L.circleMarker(fslocation,circleMarkerOption).addTo(map)
}
	

												   
function showCuEvent(){
map.setView([37.32212,-122.045],14);
  if(!map.hasLayer(cuEvent))
  {	
  cuEvent.addTo(map);	
	polyline.addTo(map);	
	}
	else
	{map.removeLayer(cuEvent);
     map.removeLayer(polyline);
	}
	}


var pk=L.geoJson(park, {


	pointToLayer: function (feature, latlng){
	return L.marker(latlng,geojsonMarkerOptions);
	
	}

	,onEachFeature: function (feature, layer) {
	    layer.options.title=feature.properties.Name;
        layer.bindPopup('<b>'+feature.properties.Name+'</b><hr>Open: '+feature.properties.OPERHOURS+'<hr><li>Restroom: '+feature.properties.RESTROOM+'</li><li>Play Ground: '+feature.properties.PLAYGROUND+'</li><li>Golf: '+feature.properties.GOLF+'</li><li>Soccer: '+feature.properties.SOCCER+'</li><li>Baseball: '+feature.properties.BASEBALL+'</li><li>Basketball: '+feature.properties.BASKETBALL+'</li><li>Tennis Court: '+feature.properties.TENNISCOURT+'</li><li>BBQ Pit: '+feature.properties.BBQPIT+'</li><li>Bocceball: '+feature.properties.BOCCEBALL+'</li><li>Volleyball: '+feature.properties.VOLLEYBALL+'</li><a href='+feature.properties.PARKURL+' target="_blank">more info</a>');
		
		layer.on('click', function(e){ 
		
		
		map.setView(e.latlng, 16);
		if(map.hasLayer(circle))
{map.removeLayer(circle);}

    

circle = L.circleMarker(e.latlng, circleMarkerOption).addTo(map);

})
    
    	parkID.push(feature.properties.Name);
		coords.push(feature.geometry.coordinates);
		
		name_coor.push(parkID,coords);
    }});

	function showHF1(){
map.setView([37.32212,-122.045],13);
//var mNode = document.getElementById("list1");
if (navigator.appName == 'Microsoft Internet Explorer' ||  !!(navigator.userAgent.match(/Trident/) || navigator.userAgent.match(/rv 11/)) || (typeof $.browser !== "undefined" && $.browser.msie == 1))
{

 $("#activity option[value='BASEBALL']").remove();
 $("#activity option[value='basketball']").remove();
  $("#activity option[value='bbq']").remove();
   $("#activity option[value='soccer']").remove();
    $("#activity option[value='tennis']").remove();
  
}
  if(!map.hasLayer(pk))
  { var mNode = document.getElementById("list1");
        while (mNode.firstChild) {
    mNode.removeChild(mNode.firstChild);}
		pk.addTo(map);
		   
		collectionPkname(parkID,"list1");
	}
	else
	
	{
	if (map.hasLayer(pk))
	{map.removeLayer(pk);
	mynode=[];
    textnode=[];
	}
	map.removeLayer(circle);
	
	
	var mNode = document.getElementById("list1");
    while (mNode.firstChild) {
    mNode.removeChild(mNode.firstChild);
	
	
    }
}
}

//var select = document.getElementById("activity");

function actselect(){
    //var selectedString = select.options[select.selectedIndex].value;
	if(map.hasLayer(circle))
	{map.removeLayer(circle);}
	map.setView([37.32212,-122.045],13);
    if (document.getElementById("activity").value=="BASEBALL")
	{ //alert(selectedString);
	activityselect("BASEBALL");
	}
	else if(document.getElementById("activity").value=="basketball")//(selectedString=="basketball")
	{
	activityselect("BASKETBALL");
	}
	else if(document.getElementById("activity").value=="bbq")//(selectedString=="basketball")
	{
	activityselect("BBQPIT");
	}
	else if(document.getElementById("activity").value=="soccer")//(selectedString=="basketball")
	{
	activityselect("SOCCER");
	}
	else if(document.getElementById("activity").value=="tennis")//(selectedString=="basketball")
	{
	activityselect("TENNISCOURT");
	}
	else {
	activityselect("ALL");
	}
}
function activityselect(acttype)
{parkID=[];
//alert(acttype);
if(map.hasLayer(pk))
{map.removeLayer(pk);
}

pk=L.geoJson(park, {


	pointToLayer: function (feature, latlng){
	return L.marker(latlng,geojsonMarkerOptions);
	
	}
,
	filter: function(feature, layer) {
	if(acttype=="BASEBALL")
	   {var a=feature.properties.BASEBALL;
	        if(a=="No")
	            {	           
	             a=false;
	             }
		}
            // return a;
			 
	else if(acttype=="BASKETBALL")
	     { a=feature.properties.BASKETBALL;	
	       if(a=="No")
	            {	           
	             a=false;
	             }
		  }
    else if(acttype=="BBQPIT")
	     { a=feature.properties.BBQPIT;	
	       if(a=="No")
	            {	           
	             a=false;
	             }
		  }
	 else if(acttype=="SOCCER")
	     { a=feature.properties.SOCCER;	
	       if(a=="No")
	            {	           
	             a=false;
	             }
		  }
	 else if(acttype=="TENNISCOURT")
	     { a=feature.properties.TENNISCOURT;	
	       if(a=="No")
	            {	           
	             a=false;
	             }
		  }
	else  { a=feature.geometry.type;	
	       if(a=="Point")
	            {	           
	             a=true;
	             }
		  }
             return a; 
			 
			 
  } 

  
	
	,onEachFeature: function (feature, layer) {
	    layer.options.title=feature.properties.Name;
        layer.bindPopup('<b>'+feature.properties.Name+'</b><hr>Open: '+feature.properties.OPERHOURS+'<hr><li>Restroom: '+feature.properties.RESTROOM+'</li><li>Play Ground: '+feature.properties.PLAYGROUND+'</li><li>Golf: '+feature.properties.GOLF+'</li><li>Soccer: '+feature.properties.SOCCER+'</li><li>Baseball: '+feature.properties.BASEBALL+'</li><li>Basketball: '+feature.properties.BASKETBALL+'</li><li>Tennis Court: '+feature.properties.TENNISCOURT+'</li><li>BBQ Pit: '+feature.properties.BBQPIT+'</li><li>Bocceball: '+feature.properties.BOCCEBALL+'</li><li>Volleyball: '+feature.properties.VOLLEYBALL+'</li><a href='+feature.properties.PARKURL+' target="_blank">more info</a>');
;
	layer.on('click', function(e){ 
		
		
		map.setView(e.latlng, 16);
		if(map.hasLayer(circle))
{map.removeLayer(circle);}

    

circle = L.circleMarker(e.latlng, circleMarkerOption
   ).addTo(map);

})
        
    	parkID.push(feature.properties.Name);
		coords.push(feature.geometry.coordinates);
		
		//name_coor.push(parkID,coords);
    }}).addTo(map);

//var slist=document.getElementById("list1");
var mynode2=[];
var textnode2=[];
//alert("here");

var mNode2 = document.getElementById("list1");
while(mNode2.hasChildNodes())
	{mNode2.removeChild(mNode2.firstChild);}

		    for(var i=0; i<parkID.length;i++)
			
            {
			//var slist=document.getElementById("list1");
			mynode2[i]=document.createElement("LI"); 
 
             setAttributes(mynode2[i],{"id":parkID[i],"onClick":"selectPK(this)" });
             var num=Number(i)+1;
		     //alert(parkID2[i]);
             textnode2[i] = document.createTextNode(""+num+"."+" "+parkID[i]); 
              mynode2[i].appendChild(textnode2[i]);
		   
		      var alist=document.getElementById("list1");
              alist.appendChild(mynode2[i]);
		 //alert("mmmmm");
	      }	
		   //parkID=[];
	 
	}
	
function getIndexAry(arry,n)
{
/* arry.sort(function(a,b) {
        return a[0]-b[0]
    });
*/
for(var i=0;i,arry.length;i++)
  {if (arry[0][i]==n)
  
   return arry[1][i];
   }
 }

function selectPK(ele){	
//name_coor=combo(parkID,coords);
var myid=ele.id;
//alert(myid);
var xy=getIndexAry(name_coor, myid).toString();

var arr = xy.split(",");
var x = parseFloat(arr[0]);
var y = parseFloat(arr[1]);


if(map.hasLayer(circle))
{map.removeLayer(circle);}

    
map.setView([y,x],16);
circle = L.circleMarker([y,x], circleMarkerOption).addTo(map);

    
		// collectionPkname(parkID);
}


function setAttributes(el, attrs) {
  for(var key in attrs) {
    el.setAttribute(key, attrs[key]);
  }
}

function collectionPkname(mylist,eleID){

//mylist.sort();

  for(var i in mylist){
 // alert(mylist[i]);
 mynode=[];
 textnode=[];
 mynode[i]=document.createElement("LI"); 
 
  setAttributes(mynode[i],{"id":mylist[i],"onClick":"selectPK(this)" });
  var num=Number(i)+1;
  textnode[i] = document.createTextNode(""+num+"."+" "+mylist[i]); 
  mynode[i].appendChild(textnode[i]);
  document.getElementById(eleID).appendChild(mynode[i]);
}



}

var psIcon=new L.icon({
	iconUrl: 'IconImg/star2.png',
	iconSize: [20,20]
	});

var psOptions={
    icon: psIcon
	
	};
	

var cityService=L.geoJson(cService, {


	pointToLayer: function (feature, latlng){
	return L.marker(latlng,psOptions);
	
	}

	,onEachFeature: function (feature, layer) {
	    layer.options.title=feature.properties.Name;
        layer.bindPopup('<b>'+feature.properties.Name+'</b><hr>Adress: '+feature.properties.Address+'<br>Phone: '+feature.properties.MAINPHONE+'<br><a href='+feature.properties.WEBSITE+' target="_blank">more info</a>');
		
		layer.on('click', function(e){ 
		
		
		map.setView(e.latlng, 16);
		if(map.hasLayer(circle))
              {map.removeLayer(circle);}

               circle = L.circleMarker(e.latlng,circleMarkerOption).addTo(map);

         })
    cu_list.push(feature.properties.Name);
    xy_list.push(feature.geometry.coordinates);	
	cu_xy.push(cu_list,xy_list);
    }});
function showService(a){
map.setView([37.32212,-122.045],13);
if(!map.hasLayer(a))
  {var mNode = document.getElementById("CSlist");
        while (mNode.firstChild) {
    mNode.removeChild(mNode.firstChild);}
		a.addTo(map);
		   
		getNameList(cu_list,"CSlist");
		//alert(cu_list);
		
	}
	else
	{
	if (map.hasLayer(a))
	{map.removeLayer(a);
	csnode=[];
    cstextnode=[];
	
	}
	map.removeLayer(circle);
	
	var mNode = document.getElementById("CSlist");
    while (mNode.firstChild) {
    mNode.removeChild(mNode.firstChild);
	
	
    }
}

}

var csnode=[];
var cstextnode=[];
function getNameList(lis,eleID){

//mylist.sort();

  for(var i in lis){
 // alert(mylist[i]);
 
 csnode[i]=document.createElement("LI"); 
  setAttributes(csnode[i],{"id":lis[i],"onClick":"selectM(this)" });
  //setAttributes(mynode[i],{"id":the_list[i],"onClick":"selectM()" });
  var num=Number(i)+1;
  cstextnode[i] = document.createTextNode(""+num+"."+" "+lis[i]); 
  csnode[i].appendChild(cstextnode[i]);
  document.getElementById(eleID).appendChild(csnode[i]);
  
}
csnode=[];
cstextnode=[];
}
function selectM(e){	
//name_coor=combo(parkID,coords);

var myid=e.id;

var xy=getIndexAry(cu_xy, myid).toString();

var arr = xy.split(",");
var x = parseFloat(arr[0]);
var y = parseFloat(arr[1]);


if(map.hasLayer(circle))
{map.removeLayer(circle);}

    
map.setView([y,x],16);
circle = L.circleMarker([y,x], circleMarkerOption).addTo(map);

}

function showGabage(){
map.setView([37.32212,-122.045],13);
  if(!map.hasLayer(garbage))
  {
		//garbage{style:style}.addTo(map);
		//garbage.addTo(map);
		garbage=L.geoJson(gbgsc, {
        style: style,
        onEachFeature: onEachFeature
         }).addTo(map);
		 //info.addTo(map);
		
	}
	else
	{map.removeLayer(garbage);
	//map.removeControl(info);
	
	}
	}

function getColor(d) {
    if (d =="Monday"){return '#9966ff';} 
    else if (d =="Tuesday" ) {return '#3366ff';}
    else if (d =="Wednesday"){return '#00cc99';}
    else if (d =="Thursday" ){return '#ff9933';} 
     else {return '#ffff4d';} 
           
}
function style(feature) {
    return {
        fillColor: getColor(feature.properties.Day),
        weight: 2,
        opacity: 1,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.3
    };
}

/*var info = L.control();

L.control({position: 'bottomright'});
info.onAdd = function (map) {
   this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
  return this._div;
};

// method that we will use to update the control based on feature properties passed
info.update = function (props) {
    this._div.innerHTML = '<h4>Garbage Day: </h4>' +  (props ?
     '<h3>' + props.Day + '</h3><br />' 
       : 'Hover over a state');
   
};

info.addTo(map);
*/
function highliteFeature(e) {
    var layer = e.target;
    layer.bindPopup("<b>"+layer.feature.properties.Day+"</b>").openPopup();
    layer.setStyle({
        weight: 5,
        color: '#666',
        dashArray: '',
        fillOpacity: 0.7
    });

    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
        layer.bringToFront();
    }
	//info.update(layer.feature.properties);
}

function highlightFeature(da) {
var gdate=da.id;

var layer_num=[];
//alert(gdate);
var layer=[];
 
if (gdate=='mon')
{layer_num=[8,11];
}

else if (gdate=='tue')
{layer_num=[7,10,12];
}

else if (gdate=='wed')
{layer_num=[1,6];}
else if(gdate=='thur')
{layer_num=[2,4,5,15];}
else
{layer_num=[3,9,13,14];
}
 

    for (var i=0; i<layer_num.length; i++)
	{
	
	 layer[i]=garbage.getLayer(layer_num[i]);
	 layer[i].setStyle({
        weight: 5,
        color: 'yellow',
        dashArray: '',
        fillOpacity: 0.7
    });
		
         }
		 if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
       layer[i].bringToFront();
	}
	}

	//alert("here");/*	if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
     
function resetHighlight(dat) {
 var gdate=dat.id;

var layer_num=[];
//alert(gdate);
var layer=[];
 
if (gdate=='mon')
{layer_num=[8,11];
}

else if (gdate=='tue')
{layer_num=[7,10,12];
}

else if (gdate=='wed')
{layer_num=[1,6];}
else if(gdate=='thur')
{layer_num=[2,4,5,15];}
else
{layer_num=[3,9,13,14];
}
 

    for (var i=0; i<layer_num.length; i++)
	{
	
	 layer[i]=garbage.getLayer(layer_num[i]); 
    garbage.resetStyle(layer[i]);
	}
	}
 
function resetHighlite(e) {
    garbage.resetStyle(e.target);
	//info.update();
}

function zoomToFeature(e) {
    map.fitBounds(e.target.getBounds());
}
function onEachFeature(feature, layer) {
layer._leaflet_id = feature.properties.OBJECTID;     
    layer.on({
        mouseover: highliteFeature,
       mouseout: resetHighlite,
        click: zoomToFeature
		
    });
	
}

var fsID=[];
var fscoords=[];
var fs_coor=[];

var fsIcon=new L.icon({
	iconUrl: 'IconImg/fire.png',
	iconSize: [20,20]
	});

var FSMarkerOptions={
    icon: fsIcon
	
	};
var fs1=L.marker([37.323239789324376, -122.026841570039], {icon: fsIcon}).bindPopup("<p>Cupertino Fire Station #1</p><hr>Address: 20215 Stevens Creek Blvd<br>TEL: 408-299-3144<br><a href='http://www.sccfd.org/index.php' target='_blank'>more info</a>").on('click', function(e){ 
		map.setView(e.latlng, 16);
		while(map.hasLayer(circle))
              {map.removeLayer(circle);}
               circle = L.circleMarker(e.latlng,circleMarkerOption).addTo(map);
         })	;	
		 
var fs2=L.marker([37.321271248517824,-122.07029708259978], {icon: fsIcon}).bindPopup("<p>Monta Vista Fire Station #7</p><hr>Address: 22620 Stevens Creek Blvd<br>TEL: 408-299-3144<br><a href='http://www.sccfd.org/index.php' target='_blank'>more info</a>").on('click', function(e){ 
		map.setView(e.latlng, 16);
		if(map.hasLayer(circle))
              {map.removeLayer(circle);}
               circle = L.circleMarker(e.latlng,circleMarkerOption).addTo(map);
         })	;
		 
var fs3=L.marker([37.297930181724325,-122.04165393089755], {icon: fsIcon}).bindPopup("<p>Seven Springs Fire Station #2</p><hr>Address: 21000 Seven Springs Pkwy<br>TEL: 408-299-3144<br><a href='http://www.sccfd.org/index.php' target='_blank'>more info</a>").on('click', function(e){ 
		map.setView(e.latlng, 16);
		if(map.hasLayer(circle))
              {map.removeLayer(circle);}
               circle = L.circleMarker(e.latlng,circleMarkerOption).addTo(map);
         })	;	
var shri=L.marker([37.295163545373185,-122.03265575352162], {icon: fsIcon}).bindPopup("<p>Santa Clara County Sheriffs Office</p><hr>Address: 1601 S De Anza Blvd STE 148<br>TEL: 408-808-4900 or 408-299-3233 Dispatch<br><a href='http://www.sccsheriff.org/portal/site/sheriff/' target='_blank'>more info</a>").on('click', function(e){ 
		map.setView(e.latlng, 16);
		if(map.hasLayer(circle))
              {map.removeLayer(circle);}
               circle = L.circleMarker(e.latlng,circleMarkerOption).addTo(map);
         })	;	
//layer.on
function showFS(){
map.setView([37.32212,-122.045],13);
if(map.hasLayer(circle)) 
  {map.removeLayer(circle);}//var mNode = document.getElementById("list1");
if(!map.hasLayer(fs1))
{
fs1.addTo(map);
fs2.addTo(map);
fs3.addTo(map);
shri.addTo(map);


}
		   
else{
map.removeLayer(fs1);	
map.removeLayer(fs2);	
map.removeLayer(fs3);	
map.removeLayer(shri);		//collectionPkname(parkID,"list1");
if(map.hasLayer(circle)) 
  {map.removeLayer(circle);}
  }	
	
	}

function fsselect(n)
{
if(map.hasLayer(circle)) 
  {map.removeLayer(circle);}
var fslocation=n.getLatLng();
map.setView(fslocation,16);
//alert(n.getLatLng());
circle = L.circleMarker(fslocation,circleMarkerOption).addTo(map);
}

var sk;
function showSC(){
map.setView([37.32212,-122.045],13);
if(map.hasLayer(circle))
{map.removeLayer(circle);}
  if(!map.hasLayer(sk))
  {
		//garbage{style:style}.addTo(map);
		//garbage.addTo(map);
		sk=L.geoJson(skool, 
		{
		pointToLayer: function (feature, latlng){
	return L.marker(latlng,scIcon(feature));
	
	}
        
        ,onEachFeature: onEachSC
         }
		 ).addTo(map);
		 //info.addTo(map);
		
	}
	else
	{map.removeLayer(sk);
	//map.removeControl(info);
	
	}
	}
var esIcon=new L.icon({
	iconUrl: 'IconImg/elementary.png',
	iconSize: [20,20]
	});

var msIcon=new L.icon({
	iconUrl: 'IconImg/middle.png',
	iconSize: [20,20]
	});
var hsIcon=new L.icon({
	iconUrl: 'IconImg/high.png',
	iconSize: [20,20]
	});
var csIcon=new L.icon({
	iconUrl: 'IconImg/college.png',
	iconSize: [20,20]
	});

/*var FSMarkerOptions={
    icon: fsIcon
	
	};
	*/
function getSCIcon(d) {
    if (d =="Elementary"){return esIcon;} 
    else if (d =="Middle School" ) {return msIcon;}
    else if (d =="High School"){return hsIcon;}
//    else if (d =="Thursday" ){return 'orange';} 
     else {return csIcon;} 
           
}
function scIcon(feature) {
    return {
        icon: getSCIcon(feature.properties.CLASSIFICA)
        
    };
}

function onEachSC(feature, layer) {
layer._leaflet_id = feature.properties.OBJECTID;     
layer.bindPopup('<b>'+feature.properties.Name+'</b>');
layer.on('click', function(e){ 
		
		
		map.setView(e.latlng, 16);
		if(map.hasLayer(circle))
              {map.removeLayer(circle);}

               circle = L.circleMarker(e.latlng,circleMarkerOption).addTo(map);

         });
/*function(e){ 
		
		
		map.setView(e.latlng, 16);
		if(map.hasLayer(circle))
{map.removeLayer(circle);}

    

circle = L.circleMarker(e.latlng, circleMarkerOption).addTo(map);
*/	   	
}

function selectSK(a)
{
if(map.hasLayer(circle))
{map.removeLayer(circle);}
var s=a.id;
//alert(s);
var sarry=[];
sarry = s.split(",");
//alert(sarry[0]);
var sx = parseFloat(sarry[0]);
var sy = parseFloat(sarry[1]);
//var sxy=sx+','+sy;
//alert('here'+sxy);
//map.setView([sx,sy],16);
circle = L.circleMarker([sx,sy],circleMarkerOption).addTo(map);
//circle = L.circleMarker(fslocation,circleMarkerOption).addTo(map)
}

var bikeRT;
function showBikeRT(){
map.setView([37.32212,-122.045],13);
  if(!map.hasLayer(bikeRT))
  {		
		bikeRT=L.geoJson(bkrt,{style: linestyle,onEachFeature: function(feature, layer)
		                                                         {
															
																 layer.bindPopup('<b>'+feature.properties.PathType+'</b>');
		                                                         
										           }}).addTo(map);
		
		
	}
	else
	{map.removeLayer(bikeRT);

	}
	}

		

function getlineColor(d) {
    if (d =="ROW PUBLIC ACCESS"){return 'red';} 
    else if (d =="BIKE PATHS OFF STREET" ) {return 'brown';}
    else if (d =="BIKE LANES ON STREET"){return 'green';}
    else if (d =="BIKE ROUTE" ){return 'orange';} 
     else {return 'pink';} 
	 
           
}
function linestyle(feature) {
    return {
        color: getlineColor(feature.properties.PathType),
        weight: 5
    };
}


  var evIcon=new L.icon({
	iconUrl: 'IconImg/ev2.png',
	iconSize: [20,20]
	});

var evMarkerOptions={
    icon: evIcon
	
	};
var eStation; 
eStation=L.geoJson(estation,{


	pointToLayer: function (feature, latlng){
	                             return L.marker(latlng,evMarkerOptions);
	
	},onEachFeature: function(feature, layer)
		                                            {             
															layer.bindPopup('<b>'+feature.properties.Address+'</b>');
		                                                    layer.on('click', function(e){ 
		
		
		map.setView(e.latlng, 16);
		if(map.hasLayer(circle))
              {map.removeLayer(circle);}

               circle = L.circleMarker(e.latlng,circleMarkerOption).addTo(map);

         });    // map.addLayer(layer);
		                                                        // map.addLayer(layer);
										               }
												   });

function showEstation(){
map.setView([37.32212,-122.045],14);
  if(!map.hasLayer(eStation))
  {		
		eStation.addTo(map);
		
		
	}
	else
	{map.removeLayer(eStation);
     map.removeLayer(circle);
	}
	}
var stclean;
function showStClean(){
map.setView([37.32212,-122.045],13);
  if(!map.hasLayer(stclean))
  {
		//garbage{style:style}.addTo(map);
		//garbage.addTo(map);
		stclean=L.geoJson(stcln, {
        style: ststyle,
        onEachFeature: onEachST
         }).addTo(map);
		 //info.addTo(map);
		
	}
	else
	{map.removeLayer(stclean);
	//map.removeControl(info);
	
	}
	}

function getStColor(d) {
    if (d =="2ND & 4TH MONDAY"){return '#9966ff';} 
    else if (d =="2ND & 4TH TUESDAY" ) {return '#3366ff';}
    else if (d =="2ND & 4TH WEDNESDAY"){return '#00cc99';}
    else if (d =="2ND & 4TH THURSDAY" ){return '#ff9933';} 
	 else if (d =="1ST & 3RD MONDAY" ){return '#FFFF4D';} 
	  else if (d =="1ST & 3RD TUESDAY" ){return '#669900';} 
	   else if (d =="1ST & 3RD WEDNESDAY" ){return '#ff3399';} 
     else {return '#996633';} 
           
}
function ststyle(feature) {
    return {
        fillColor: getStColor(feature.properties.Schedule),
        weight: 2,
        opacity: 1,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.3
    };
}


function highliteST(e) {
    var layer = e.target;
    layer.bindPopup("<b>"+layer.feature.properties.Schedule+"</b>").openPopup();
    layer.setStyle({
        weight: 5,
        color: '#666',
        dashArray: '',
        fillOpacity: 0.7
    });

    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
        layer.bringToFront();
    }
	//info.update(layer.feature.properties);
}

function highlightSTCLN(da) {
var gdate=da.id;

var layer_num=[];
//alert(gdate);
var layer=[];
 
if (gdate=='mon13')
{layer_num=[8];
}

else if (gdate=='tue13')
{layer_num=[11];
}

else if (gdate=='wed13')
{layer_num=[7];}
else if(gdate=='th13')
{layer_num=[6];}
else if(gdate=='mon24')
{layer_num=[4];}
else if(gdate=='tue24')
{layer_num=[5];}
else if(gdate=='wed24')
{layer_num=[10];}
else
{layer_num=[9];
}
 

    for (var i=0; i<layer_num.length; i++)
	{
	
	 layer[i]=stclean.getLayer(layer_num[i]);
	 layer[i].setStyle({
        weight: 5,
        color: 'yellow',
        dashArray: '',
        fillOpacity: 0.7
    });
		
         }
		 if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
       layer[i].bringToFront();
	}
	}

	//alert("here");/*	if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
    
function resetHighlightSTCLN(dat) {
 var gdate=dat.id;

var layer_num=[];
//alert(gdate);
var layer=[];
 
if (gdate=='mon13')
{layer_num=[8];
}

else if (gdate=='tue13')
{layer_num=[11];
}

else if (gdate=='wed13')
{layer_num=[7];}
else if(gdate=='th13')
{layer_num=[6];}
else if(gdate=='mon24')
{layer_num=[4];}
else if(gdate=='tue24')
{layer_num=[5];}
else if(gdate=='wed24')
{layer_num=[10];}
else
{layer_num=[9];
}

    for (var i=0; i<layer_num.length; i++)
	{
	
	 layer[i]=stclean.getLayer(layer_num[i]); 
    stclean.resetStyle(layer[i]);
	}
	}
 
function resetST(e) {
    stclean.resetStyle(e.target);
	//info.update();
}

function zoomToFeature(e) {
    map.fitBounds(e.target.getBounds());
}
function onEachST(feature, layer) {
layer._leaflet_id = feature.properties.OBJECTID;     
    layer.on({
        mouseover: highliteST,
       mouseout: resetST,
        click: zoomToFeature
		
    });
	
}

$(".btn-minimize").click(function(){
    $(this).toggleClass('btn-plus');
	$(this).find('i').toggleClass('glyphicon-triangle-top').toggleClass('glyphicon-triangle-bottom');

    $("#container").slideToggle();
  });

</script>



</body>
</html>
